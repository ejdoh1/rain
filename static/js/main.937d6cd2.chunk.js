(this.webpackJsonprainrain=this.webpackJsonprainrain||[]).push([[0],{76:function(e,t,a){e.exports=a(97)},81:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),c=(a(81),a(13)),i=a(45),s=a(47),m=a(46),u=a(44),p=(a(82),a(3)),d=a.n(p),h=(a(83),a(49)),f=a(50),b=a.n(f),g=a(112),v=a(111),E=a(51),j=a(39),O=a.n(j),y=a(41);delete d.a.Icon.Default.prototype._getIconUrl,d.a.Icon.Default.mergeOptions({iconRetinaUrl:a(94),iconUrl:a(95),shadowUrl:a(96)});var w="https://radar-tiles.service.bom.gov.au/tiles/{timestep}/{z}/{x}/{y}.png";function S(){var e=Object(n.useState)({lat:0,lng:0}),t=Object(c.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(5),p=Object(c.a)(l,1)[0],f=Object(n.useState)(""),j=Object(c.a)(f,2),S=j[0],F=j[1],x=Object(n.useState)(""),k=Object(c.a)(x,2),I=k[0],z=k[1],Y=Object(n.useState)(""),D=Object(c.a)(Y,2),L=D[0],C=D[1],M=Object(n.useState)(""),Z=Object(c.a)(M,2),U=Z[0],A=Z[1],W=Object(n.useState)("0"),B=Object(c.a)(W,2),J=B[0],N=B[1],T=Object(n.useState)(""),R=Object(c.a)(T,2),_=R[0],G=R[1],V=r.a.useState(0),q=Object(c.a)(V,2),H=q[0],K=q[1],P=Object(n.useRef)();Object(n.useEffect)((function(){0!==a.lat&&fetch("https://osiu38kob3.execute-api.ap-southeast-2.amazonaws.com/dev/rain-direction?loc="+a.lat+","+a.lng).then((function(e){return e.json()})).then((function(e){C(e.linestring),A(e.index.inputs[1].png.split("/")[1].split(".")[0])}))}),[a]),Object(n.useEffect)((function(){var e=document.createElement("script");e.src="https://ihcantabria.github.io/Leaflet.CanvasLayer.Field/dist/leaflet.canvaslayer.field.js",e.async=!0,document.body.appendChild(e);var t=P.current.leafletElement;y.a("https://rain-rain.s3-ap-southeast-2.amazonaws.com/u.asc").then((function(e){y.a("https://rain-rain.s3-ap-southeast-2.amazonaws.com/v.asc").then((function(a){var n=d.a.VectorField.fromASCIIGrids(e,a),r=d.a.canvasLayer.vectorFieldAnim(n,{paths:1e3,fade:.97,maxAge:50,velocityScale:5e-4,color:"rgba(255, 255, 255, 0.7)"}).addTo(t),o=d.a.canvasLayer.scalarField(n.getScalarField("directionFrom"),{type:"vector",color:"white",vectorSize:25,arrowDirection:"from"});d.a.control.layers({},{Flow:r,Arrows:o},{position:"bottomleft",collapsed:!1}).addTo(t)}))}))}),[]),Object(h.a)((function(){fetch("https://api.weather.bom.gov.au/v1/rainradarlayer/capabilities").then((function(e){return e.json()})).then((function(e){var t=e.data.timesteps[H];G(t+"Z");var a=H/(e.data.timesteps.length-1)*100;N(a),F(w.replace("{timestep}",t)),setTimeout((function(){z(w.replace("{timestep}",t))}),300),H===e.data.timesteps.length-1?K(0):K(H+1)}))}),1e3);var Q=function(e){var t=e.split(":"),a="";a=t[0],3===t.length&&(a=60*parseInt(t[0],10)+parseInt(t[1]));var n=" minutes ago";return"1"===a&&(n=" minute ago"),a+n};return r.a.createElement(i.a,{ref:P,center:[-28,132],zoom:p,style:{width:"100%",position:"absolute",top:0,bottom:0},updateWhenZooming:!1,updateWhenIdle:!0,preferCanvas:!0,minZoom:2,maxBounds:d.a.latLngBounds(d.a.latLng(-47,109),d.a.latLng(-7,158.1)),onClick:function(e){var t=e.latlng;return o(t)}},r.a.createElement(s.a,{maxZoom:10,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"}),""!==S?r.a.createElement(s.a,{maxZoom:10,url:S}):r.a.createElement(r.a.Fragment,null),""!==I?r.a.createElement(s.a,{maxZoom:10,url:I}):r.a.createElement(r.a.Fragment,null),0!==a.lat?r.a.createElement(m.a,{position:a}):r.a.createElement(r.a.Fragment,null),""!==L?r.a.createElement(u.a,{key:JSON.stringify(L),data:L,arrowheads:{fill:!0,size:"30%"},style:{color:"green"}}):r.a.createElement(r.a.Fragment,null),""!==_?r.a.createElement(b.a,{position:"topright"},r.a.createElement(g.a,{style:{minWidth:100}},r.a.createElement(v.a,null,r.a.createElement(E.a,{percent:J,strokeWidth:"8",strokeColor:"black"}),r.a.createElement(O.a,{filter:Q,utc:!0,durationFromNow:!0,parse:"YYYYMMDDhhmm"},_),""!==U?r.a.createElement("div",null,"Updated:",r.a.createElement(O.a,{filter:Q,utc:!0,durationFromNow:!0,parse:"YYYYMMDDhhmm"},U)):r.a.createElement(r.a.Fragment,null)))):r.a.createElement(r.a.Fragment,null))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.937d6cd2.chunk.js.map